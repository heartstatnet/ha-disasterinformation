type: markdown
title: ğŸŒ åœ°éœ‡æƒ…å ± (ç›´è¿‘24æ™‚é–“)
content: >
  {% set earthquake_entity = 'sensor.earthquake_information' %}
  {% set detection_entity = 'binary_sensor.earthquake_detection' %}

  **ç¾åœ¨ã®çŠ¶æ³**: {{ states(earthquake_entity) }}

  **åœ°éœ‡æ¤œçŸ¥çŠ¶æ…‹**: {{ 'ğŸ”´ ON' if is_state(detection_entity, 'on') else 'ğŸŸ¢ OFF' }}

  **æ¤œç´¢æ¡ä»¶**:
  - æ™‚é–“ç¯„å›²: {{ state_attr(earthquake_entity, 'time_range_hours') }}æ™‚é–“
  - æœ€å°ãƒã‚°ãƒ‹ãƒãƒ¥ãƒ¼ãƒ‰: M{{ state_attr(earthquake_entity, 'min_magnitude') }}
  - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: {{ state_attr(earthquake_entity, 'status') }}

  ---

  {% set latest_earthquake = state_attr(earthquake_entity, 'latest_earthquake') %}
  {% if latest_earthquake %}
  **æœ€æ–°åœ°éœ‡**:
  - ç™ºç”Ÿæ™‚åˆ»: {{ latest_earthquake.origin_time }}
  - éœ‡æºåœ°: {{ latest_earthquake.hypocenter }}
  - ãƒã‚°ãƒ‹ãƒãƒ¥ãƒ¼ãƒ‰: M{{ latest_earthquake.magnitude }}
  - ç™ºè¡¨æ™‚åˆ»: {{ latest_earthquake.report_datetime }}
  
  ---
  {% endif %}

  {% set recent_earthquakes = state_attr(earthquake_entity, 'recent_earthquakes') %}
  {% if recent_earthquakes and recent_earthquakes|length > 0 %}
  **ç›´è¿‘ã®åœ°éœ‡ä¸€è¦§**:
  
  | ç™ºè¡¨æ™‚åˆ» | éœ‡æºåœ° | ãƒã‚°ãƒ‹ãƒãƒ¥ãƒ¼ãƒ‰ |
  |----------|--------|----------------|
  {% for eq in recent_earthquakes %}
  | {{ as_timestamp(strptime(eq.report_datetime, '%Y-%m-%dT%H:%M:%S%z')) | timestamp_custom('%m/%d %H:%M') }} | {{ eq.hypocenter }} | M{{ eq.magnitude }} |
  {% endfor %}
  
  ---
  
  **çµ±è¨ˆæƒ…å ±**:
  - è©²å½“åœ°éœ‡æ•°: {{ state_attr(earthquake_entity, 'earthquake_count') }}ä»¶
  - æœ€å¤§ãƒã‚°ãƒ‹ãƒãƒ¥ãƒ¼ãƒ‰: M{{ recent_earthquakes | map(attribute='magnitude') | map('float') | max }}
  - æœ€å°ãƒã‚°ãƒ‹ãƒãƒ¥ãƒ¼ãƒ‰: M{{ recent_earthquakes | map(attribute='magnitude') | map('float') | min }}
  {% else %}
  **ç›´è¿‘ã®åœ°éœ‡**: è©²å½“ã™ã‚‹åœ°éœ‡ã¯ã‚ã‚Šã¾ã›ã‚“
  {% endif %}

  ---
  
  **ãƒ‡ãƒ¼ã‚¿æ›´æ–°æ™‚åˆ»**: {{ as_timestamp(now()) | timestamp_custom('%Y/%m/%d %H:%M:%S') }}